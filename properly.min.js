// Properly v0.1.1
(function(a){a.Properly=(function(){var d=function(e){if(this instanceof d){this.get=d.getter(e);this.set=d.setter(e);this.rem=d.remover(e)}else{return{get:d.getter(e),set:d.setter(e),rem:d.remover(e)}}};d.getter=function(g){var f=d.parseFieldNames(g),e=f.length;if(e>1){return function(k){for(var h=0;h<e;h++){var j=f[h];k=k[j]}return k}}else{return function(h){return h[g]}}};d.get=function(e,f){return d.getter(f).call(null,e)};d.multigetter=function(g){var e=(g instanceof Array)?g:b(arguments);var f=e.map(d.getter);return function(h){return f.map(function(i){return i(h)})}};d.multiget=function(f,e){return d.multigetter.apply(null,b(arguments,1)).call(null,f)};d.setter=function(g){var f=d.parseFieldTypes(g),e=f.length;if(e>1){return function(l,j){for(var h=0;h<e;h++){var k=f[h];if(k.type){l=l[k.name]||(l[k.name]=new k.type)}else{if(l instanceof Array&&k.name===""){l.push(j)}else{l[k.name]=j}}}return l}}else{return function(i,h){return i[g]=h}}};d.set=function(f,g,e){return d.setter(g).call(null,f,e)};d.multisetter=function(e){var f=[];for(var g in e){f.push({set:d.setter(g),value:e[g]})}return function(h){return f.map(function(i){return i.set(h,i.value)})}};d.multiset=function(f,e){return d.multisetter(e).call(null,f)};d.remover=function(g){var f=d.parseFieldNames(g),e=f.length;if(e>1){return function(l,j){for(var h=0;h<e;h++){var k=f[h];if(h===e-1){delete l[k]}else{l=l[k];if(typeof l==="undefined"){break}}}}}else{return function(h){delete h[g]}}};d.remove=function(e,f){return d.remover(f).call(null,e)};d.multiremover=function(g){var f=(g instanceof Array)?g:b(arguments);var e=f.length;return function(j){for(var h=0;h<e;h++){d.remove(obj,f[h])}}};d.multiremove=function(f,e){return d.multiremover(e).call(null,f)};d.wrap=function(e){return{get:function(f){return d.get(e,f)},set:function(g,f){return d.set(e,g,f)},rem:function(f){return d.remove(e,f)}}};d.wrap.prop=function(f,g){var e=d(g);return{get:function(){return e.get(f)},set:function(h){return e.set(f,h)},rem:function(){return e.rem(f)}}};d.template=function(e){return function(f){return e.replace(/{([^}]+)}/g,function(g,h){return d.get(f,h)})}};d.parseFieldNames=function(e){return d.parseFieldTypes(e).map(function(f){return f.name})};d.parseFieldTypes=function(j){var e=[],i={name:""};function h(){if(e.length&&e[e.length-1].type===Array){var k=parseInt(i.name);if(!isNaN(k)){i.name=k}}e.push(i);i={name:""}}while(j.length){var g=j.charAt(0);j=j.substr(1);if(g==="."){i.type=Object}else{if(g==="["){i.type=Array}else{if(g==="]"){if(j.length){var f=j.charAt(0);switch(f){case".":i.type=Object;break;case"[":i.type=Array;break;default:throw"Expected '.' or '[' after ']'; got '"+f+"'"}}g="";j=j.substr(1)}}}if(i.type){h()}else{i.name+=g}}h();return e};return d})();function b(e,d,f){return Array.prototype.slice.call(e,d,f)}function c(e,d){return Array.prototype.map.call(e,d)}})(typeof exports==="undefined"?window:exports);